{% extends "base.html" %}

{% block title %}Spelen - Roulette Casino{% endblock %}

{% block content %}
<div class="game-container">
    <!-- Left Side: Roulette Table -->
    <div class="game-main">
        <h1>ðŸŽ° Roulette Tafel</h1>
        
        <div class="roulette-wrapper">
            <!-- Spinning Wheel with Ball -->
            <div class="wheel-container">
                <canvas id="rouletteWheel" width="300" height="300"></canvas>
                <div class="ball-path" id="ballPath">
                    <div class="roulette-ball" id="rouletteBall"></div>
                </div>
            </div>

            <!-- Betting Table -->
            <div class="betting-table">
                <div class="table-section zero-section">
                    <div class="table-cell zero-cell" data-number="0">0</div>
                </div>

                <div class="table-section color-section">
                    <div class="table-cell red-cell" data-type="color" data-value="red">ROOD</div>
                    <div class="table-cell black-cell" data-type="color" data-value="black">ZWART</div>
                </div>

                <div class="table-section numbers-section">
                    <div class="numbers-grid" id="numbersGrid">
                        <!-- Numbers will be generated by JavaScript -->
                    </div>
                </div>

                <div class="table-section odd-even-section">
                    <div class="table-cell even-cell" data-type="even">EVEN</div>
                    <div class="table-cell odd-cell" data-type="odd">ONEVEN</div>
                </div>

                <div class="table-section ranges-section">
                    <div class="table-cell low-cell" data-type="low">1-18</div>
                    <div class="table-cell high-cell" data-type="high">19-36</div>
                </div>
            </div>

            <!-- Chip Legend -->
            <div class="chip-info">
                <div class="chip-legend">
                    <p><strong>Inzetbedrag:</strong> â‚¬<input type="number" id="betAmount" min="1" max="1000" step="0.5" value="10" class="bet-input"></p>
                    <p><strong>Chip Kleur:</strong> <span id="chipColorDisplay" class="chip-preview"></span></p>
                </div>
            </div>
        </div>

        <!-- Game Result Modal -->
        <div class="game-result" id="gameResult" style="display: none;">
            <div class="result-content">
                <h2 id="resultTitle"></h2>
                <p id="resultNumber"></p>
                <p id="resultPayout"></p>
                <button class="btn btn-primary" onclick="document.getElementById('gameResult').style.display='none'">OkÃ©</button>
            </div>
        </div>
    </div>

    <!-- Right Side: Control Panel -->
    <div class="betting-section">
        <div class="balance-display">
            <span>Tegoed: â‚¬<span id="balance">{{ "%.2f"|format(user.currency) }}</span></span>
        </div>

        <div class="betting-form">
            <h2>Bedieningspaneel</h2>
            
            <div class="instruction-box">
                <p><strong>Instructies:</strong></p>
                <ul>
                    <li>Klik op een getal, kleur of optie op de tafel</li>
                    <li>Plaats je chip en klik SPIN!</li>
                    <li>Chip kleur verandert met bedrag</li>
                </ul>
            </div>

            <div class="placed-bets">
                <h3>Geplaatste Inzetten</h3>
                <div id="betsDisplay" class="bets-list">
                    <!-- Placed bets will appear here -->
                </div>
            </div>

            <button id="spinBtn" class="btn btn-large btn-success" disabled>SPIN!</button>
            
            <button id="clearBetsBtn" class="btn btn-secondary btn-block">Wis Inzetten</button>
        </div>
    </div>
</div>

<!-- Online Players -->
<div class="online-players">
    <h3>Online spelers ({{ online_players|length }})</h3>
    <ul class="players-list">
        {% for player in online_players %}
        <li class="player-item">
            <span class="player-name">{{ player.username }}</span>
            <span class="player-balance">â‚¬{{ "%.2f"|format(player.currency) }}</span>
        </li>
        {% endfor %}
    </ul>
</div>

{% endblock %}
